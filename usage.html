<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2017-06-16
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20170616" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Multi Module Maven Release Plugin - </title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarEnabled">
          
    
    
            
    
        
    <a href="http://github.com/guhilling/smart-release-plugin">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
                

    <div id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
                <div class="container-fluid">
        <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
                
                                <ul class="nav">
                          <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Overview <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="index.html"  title="Introduction">Introduction</a>
</li>
                  
                      <li>      <a href="plugin-info.html"  title="Goals">Goals</a>
</li>
                  
                      <li>      <a href="release-info.html"  title="Release Info File Format">Release Info File Format</a>
</li>
                  
                      <li>      <a href="usage.html"  title="Usage">Usage</a>
</li>
                  
                      <li>      <a href="FAQ.html"  title="FAQ">FAQ</a>
</li>
                  
                      <li>      <a href="changelog.html"  title="Changelog">Changelog</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Project Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li class="dropdown-submenu">
                                      <a href="project-info.html"  title="Project Information">Project Information</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="team-list.html"  title="Team">Team</a>
</li>
                                  <li>      <a href="integration.html"  title="CI Management">CI Management</a>
</li>
                                  <li>      <a href="license.html"  title="Licenses">Licenses</a>
</li>
                                  <li>      <a href="source-repository.html"  title="Source Code Management">Source Code Management</a>
</li>
                              </ul>
            </li>
                  
                      <li class="dropdown-submenu">
                                      <a href="project-reports.html"  title="Project Reports">Project Reports</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="plugin-info.html"  title="Plugin Documentation">Plugin Documentation</a>
</li>
                                  <li>      <a href="surefire-report.html"  title="Surefire Report">Surefire Report</a>
</li>
                              </ul>
            </li>
                          </ul>
      </li>
                  </ul>
          
          
          
                   
                      </div>
          
        </div>
      </div>
    </div>
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>Maven Smart Release Plugin</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2017-06-16</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 4.1</li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Overview</li>
                                
      <li>
    
                          <a href="index.html" title="Introduction">
          <i class="none"></i>
        Introduction</a>
            </li>
                  
      <li>
    
                          <a href="plugin-info.html" title="Goals">
          <i class="none"></i>
        Goals</a>
            </li>
                  
      <li>
    
                          <a href="release-info.html" title="Release Info File Format">
          <i class="none"></i>
        Release Info File Format</a>
            </li>
                  
      <li class="active">
    
            <a href="#"><i class="none"></i>Usage</a>
          </li>
                  
      <li>
    
                          <a href="FAQ.html" title="FAQ">
          <i class="none"></i>
        FAQ</a>
            </li>
                  
      <li>
    
                          <a href="changelog.html" title="Changelog">
          <i class="none"></i>
        Changelog</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                        
      <li>
    
                          <a href="project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
                                                                                      
      <li>
    
                          <a href="project-reports.html" title="Project Reports">
          <i class="icon-chevron-right"></i>
        Project Reports</a>
                  </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>Usage</h1>
<div class="section">
<h2>Configuration of the plugin<a name="Configuration_of_the_plugin"></a></h2>
<p>Add the plugin to your pom:</p>

<div class="source">
<pre>    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;de.hilling.maven.release&lt;/groupId&gt;
                &lt;artifactId&gt;smart-release-plugin&lt;/artifactId&gt;
                &lt;version&gt;4.0&lt;/version&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
</pre></div></div>
<div class="section">
<h2>Release<a name="Release"></a></h2>
<p>To run the release, use <tt>mvn smart-release:prepare</tt>. This will execute the following steps:</p>

<ul>
  
<li>Sanity checks:
  
<ul>
    
<li>Local Repository clean?</li>
    
<li>Version numbers follow the required scheme?</li>
    
<li>No SNAPSHOT-dependencies except the local ones?</li>
  </ul></li>
  
<li>Version management:
  
<ul>
    
<li>All changes relative to the latest tag are computed. The latest tag is stored in the <tt>release-info.json</tt> file. If this file is missing the plugin assumes that all modules are released for the first time.</li>
    
<li>All modules that have changes relative to <i>their</i> latest release (that is stored in <tt>release-info.json</tt>) are prepared for release by <i>setting</i> their minor number to the next minor release number in their <tt>pom.xml</tt>. The same is done for all modules that have transitive dependencies on these modules. The plugin prints out which modules will be released and why. The <tt>release-info.json</tt> file is commited an tagged. It is not pushed. It is up to you, when you want to push the file and the corresponding tag.</li>
    
<li>All modules that are <i>not</i> released will not be changed.</li>
  </ul></li>
  
<li>A list of modules to build is stored in <tt>modules-to-build.txt</tt>. The content can be fed directly to the maven <tt>-pl</tt> (project list) option</li>
  
<li>A list of files that need to be reverted later is stored in <tt>files-to-revert.txt</tt>. The <tt>cleanup</tt> goal can be used to actual revert.</li>
  
<li>You do a maven run to build an deploy the modules that have changed. Usually you would run:</li>
</ul>

<div class="source">
<pre>   mvn -pl $(cat modules-to-build.txt) clean deploy
</pre></div>

<ul>
  
<li>If the deploy-stage was successful you should push the updated <tt>release-info.json</tt> and the corresponding tag:
  
<ul>
    
<li>This should actually be performed automatically by jenkins or whatever ci-System you are using to perform your releases. You are using a ci-System, aren&#x2019;t you?.</li>
    
<li>Of course the details of the git setup are up to you. It is actually one of the advantages of this plugin that it only does one thing and lets you configure how to handle the rest.</li>
  </ul></li>
</ul>

<div class="source">
<pre>   git push &amp;&amp; git push --tags
</pre></div></div>
<div class="section">
<h2>Creating a bugfix release<a name="Creating_a_bugfix_release"></a></h2>
<p>To create a bugfix release, follow these steps:</p>

<ul>
  
<li>Create a branch from one of the tags created during a regular release. The <tt>release-info.json</tt> must exist.</li>
  
<li>Fix your bugs.</li>
  
<li>Create a bugfix release by running <tt>mvn smart-release:prepare -DbugfixRelease=true</tt></li>
  
<li>The same steps as above are run but a new bugfix number will be appended to the latest minor version number.</li>
</ul></div>
<div class="section">
<h2>Merging changes between branches.<a name="Merging_changes_between_branches."></a></h2>
<p>If you try to merge your changes from a bugfix branch into some other branch that is roughly based on master you will run into the problem that the <tt>release-info.json</tt> files cannot be merged. In fact they are not supposed to be merged:</p>

<ul>
  
<li>Usually you want to merge everything into the &#x201c;main&#x201d; branch.</li>
  
<li>The <tt>release-info.json</tt> of the current branch is not supposed to change when merging changes from other branches.</li>
</ul>
<p>At the moment you have to take care of this situation yourself. If you accidently merge the bugfix <tt>.release-info.json</tt> into your master branch however, the next release will just fail because the version numbers in the bugfix release are not valid for major releases. So you will be able to fix this accident manually.</p></div>
<div class="section">
<h2>Release-info format<a name="Release-info_format"></a></h2>
<p>See <a href="">release-info</a> for details.</p>
<div class="section">
<h3>Forcing a release<a name="Forcing_a_release"></a></h3>
<p>It is possible to force the release of one or more specified modules, for example if the changes have not been picked up due to some issue. To do this, use the <tt>forceRelease</tt> parameter. For example:</p>

<div class="source">
<pre>	mvn smart-release:prepare -DforceRelease=MyApp
</pre></div>
<p>In this case the <tt>MyApp</tt> module will be built, even if there where no changes found.</p></div></div>
<div class="section">
<h2>SSH authentication<a name="SSH_authentication"></a></h2>
<p>Currently, only public key authentication is supported. By default, the plugin reads the private key from <tt>~/.ssh/id_rsa</tt>. If it&#x2019;s required to use a private key file from another location, you have two opportunities to achieve this:</p>
<div class="section">
<h3>Add server section to your Maven settings<a name="Add_server_section_to_your_Maven_settings"></a></h3>
<p>This is the preferred way. Firstly, add a server section to your Maven settings like this (see <a class="externalLink" href="https://maven.apache.org/settings.html#Servers">https://maven.apache.org/settings.html#Servers</a> for further information):</p>

<div class="source">
<pre>&lt;settings&gt;
    &lt;servers&gt;
        &lt;server&gt;
            &lt;id&gt;my-server&lt;/id&gt;
            &lt;privateKey&gt;/path/to/your/private_key&lt;/privateKey&gt;
            &lt;passphrase&gt;optional_passphrase&lt;/passphrase&gt; &lt;!-- This is optional --&gt;
        &lt;/server&gt;
    &lt;/servers&gt;
&lt;/settings&gt;
</pre></div>
<p>If your key is password protected, specify the password within element <b>passphrase</b>. Tip: do <i>not confuse</i> this with element <b>password</b>.</p>
<p>Secondly, specify the <tt>serverId</tt> in the plugin configuration</p>

<div class="source">
<pre>&lt;plugin&gt;
    ...
    &lt;configuration&gt;
        &lt;serverId&gt;my-server&lt;/serverId&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;	
</pre></div></div>
<div class="section">
<h3>Specify private key and optional passphrase in your POM<a name="Specify_private_key_and_optional_passphrase_in_your_POM"></a></h3>
<p>This is the insecure way to specify your custom private key. Add following properties to your plugin configuration:</p>

<div class="source">
<pre>&lt;plugin&gt;
    ...
    &lt;configuration&gt;
        &lt;privateKey&gt;/path/to/your/private_key&lt;/privateKey&gt;
        &lt;passphrase&gt;optional_passphrase&lt;/passphrase&gt; &lt;!-- This is optional --&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;
</pre></div>
<p>Note: POM configuration has precedence over Maven settings.</p></div>
<div class="section">
<h3>Custom known_hosts<a name="Custom_known_hosts"></a></h3>
<p>Per default, the plugin uses <tt>~/.ssh/known_hosts</tt>. You can override this with following property in your plugin configuration:</p>

<div class="source">
<pre>&lt;plugin&gt;
    ...
    &lt;configuration&gt;
        &lt;knownHosts&gt;/path/to/your/known_hosts&lt;/knownHosts&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;
</pre></div>
<p>Note: Maven settings related to <tt>known_hosts</tt> will <i>not</i> be considered by the plugin.</p></div></div>
<div class="section">
<h2>Contributing<a name="Contributing"></a></h2>
<p>To build and run the tests, you need Java 8 or later and Maven 3 or later. Simply clone and run <tt>mvn install</tt></p>
<p>Note that the tests run the plugin against a number of sample test projects, located in the <tt>test-projects</tt> folder. If adding new functionality, or fixing a bug, it is recommended that a sample project be set up so that the scenario can be tested end-to-end.</p>
<p>See also <a href="CONTRIBUTING.md">CONTRIBUTING.md</a> for information on deploying to Nexus and releasing the plugin.</p></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                   2017.
          All Rights Reserved.      
                    
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
